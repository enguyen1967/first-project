fix bug for ticket1276
